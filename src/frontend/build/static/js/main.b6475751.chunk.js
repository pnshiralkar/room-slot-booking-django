(this["webpackJsonphello-react"]=this["webpackJsonphello-react"]||[]).push([[0],{400:function(e,t,a){e.exports=a(913)},405:function(e,t,a){},406:function(e,t,a){},901:function(e,t){},903:function(e,t){},913:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(18),o=a.n(l),i=(a(405),a(7)),s=(a(406),a(81)),c=a(10),m=a(31),u=a(23),d=a(35),p=a(36),g=a(37),h=a(982),E=a(961),f=a(964),v=a(979),b=a(960),S=a(962),x=a(954),y=a(180),w=a.n(y),k=a(63),C=a(82),N=a(963),j=a(980),D=a(959),O=a(123),B=a.n(O),P=a(958),A=a(14),_=a.n(A),T=a(97),L=Object(C.a)((function(e){return{paper:{position:"relative",top:"45vh",transform:"translateY(-50%)",display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}})),R="".concat("/api"),M=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).fnameChange=function(e){a.setState({fname:e.target.value}),e.target.value.toString().length>=3?a.setState({validFname:!0}):a.setState({validFname:!1})},a.lnameChange=function(e){a.setState({lname:e.target.value}),e.target.value.toString().length>=3?a.setState({validLname:!0}):a.setState({validLname:!1})},a.emailChange=function(e){a.setState({email:e.target.value}),B.a.isEmail(e.target.value)?a.setState({validEmail:!0}):a.setState({validEmail:!1})},a.pwdChange=function(e){a.setState({pwd:e.target.value}),e.target.value.toString().length>=8?a.setState({validPwd:!0}):a.setState({validPwd:!1})},a.roleChange=function(e){a.setState({role:e.target.value}),e.target.value.toString().length>0?a.setState({validRole:!0}):a.setState({validRole:!1})},a.usernameChange=function(e){a.setState({username:e.target.value}),e.target.value.toString().length>=5?a.setState({validUsername:!0}):a.setState({validUsername:!1})},a.submit=function(e){if(e.preventDefault(),a.state.fname.toString().length>=3?a.setState({validFname:!0}):a.setState({validFname:!1}),a.state.lname.toString().length>=3?a.setState({validLname:!0}):a.setState({validLname:!1}),a.state.username.toString().length>=5?a.setState({validUsername:!0}):a.setState({validUsername:!1}),B.a.isEmail(a.state.email)?a.setState({validEmail:!0}):a.setState({validEmail:!1}),a.state.pwd.toString().length>=8?a.setState({validPwd:!0}):a.setState({validPwd:!1}),a.state.role.toString().length>0?a.setState({validRole:!0}):a.setState({validRole:!1}),a.state.validFname&&a.state.validLname&&a.state.validUsername&&a.state.validEmail&&a.state.validPwd&&a.state.validRole){var t={first_name:a.state.fname,last_name:a.state.lname,username:a.state.username,email:a.state.email,password:a.state.pwd,is_customer:!1,is_room_manager:!1};"customer"===a.state.role&&(t.is_customer=!0),"roomManager"===a.state.role&&(t.is_room_manager=!0);console.log(JSON.stringify(t)),_.a.post(R+"/signup",T.stringify(t),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(e){console.log(e),a.props.history.replace("/login")})).catch((function(e){if(e.response){var t="",n=e.response.data;for(var r in n)for(var l in n[r])t+=n[r][l];a.setState({errorText:t})}else console.log("Error: Network Error\n"+e)}))}},a.state={fname:"",lname:"",username:"",email:"",pwd:"",role:"",validFname:!0,validLname:!0,validUsername:!0,validEmail:!0,validPwd:!0,validRole:!1,errorText:""},a}return Object(g.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("form",{className:this.props.classes.form},r.a.createElement(x.a,{container:!0,spacing:2},r.a.createElement(x.a,{item:!0,xs:12,sm:6},r.a.createElement(v.a,{error:!this.state.validFname,autoComplete:"fname",name:"firstName",variant:"outlined",required:!0,fullWidth:!0,id:"firstName",label:"First Name",autoFocus:!0,onChange:this.fnameChange})),r.a.createElement(x.a,{item:!0,xs:12,sm:6},r.a.createElement(v.a,{error:!this.state.validLname,variant:"outlined",required:!0,fullWidth:!0,id:"lastName",label:"Last Name",name:"lastName",autoComplete:"lname",onChange:this.lnameChange})),r.a.createElement(x.a,{item:!0,xs:12},r.a.createElement(v.a,{error:!this.state.validUsername,variant:"outlined",required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",autoComplete:"username",onChange:this.usernameChange})),r.a.createElement(x.a,{item:!0,xs:12},r.a.createElement(v.a,{error:!this.state.validEmail,variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",onChange:this.emailChange})),r.a.createElement(x.a,{item:!0,xs:12},r.a.createElement(v.a,{error:!this.state.validPwd,variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:this.pwdChange})),r.a.createElement(x.a,{item:!0,xs:12},r.a.createElement(P.a,null,"Signup as* :"),r.a.createElement(D.a,{onChange:this.roleChange},r.a.createElement(b.a,{control:r.a.createElement(j.a,{value:"roomManager",color:"primary"}),label:"Room Manager",name:"role"}),r.a.createElement(b.a,{control:r.a.createElement(j.a,{value:"customer",color:"primary"}),label:"Customer",name:"role"}))),r.a.createElement(x.a,{item:!0,xs:12},r.a.createElement(P.a,{error:!0},this.state.errorText),r.a.createElement("br",null))),r.a.createElement(E.a,{fullWidth:!0,variant:"contained",color:"primary",className:this.props.classes.submit,onClick:this.submit},"Signup"),r.a.createElement(x.a,{container:!0,justify:"flex-end"},r.a.createElement(x.a,{item:!0},r.a.createElement(S.a,{href:"/login",onClick:function(t){t.preventDefault(),e.props.history.push("/login")},variant:"body2"},"Already have an account? Sign in")))))}}]),t}(r.a.Component);function I(e){var t=L();return r.a.createElement(N.a,{component:"main",maxWidth:"xs"},r.a.createElement(f.a,null),r.a.createElement("div",{className:t.paper},r.a.createElement(h.a,{className:t.avatar},r.a.createElement(w.a,null)),r.a.createElement(k.a,{component:"h1",variant:"h5"},"Create Account"),r.a.createElement(M,{classes:t,history:e.history})))}var F=Object(C.a)((function(e){return{paper:{position:"relative",top:"40vh",transform:"translateY(-50%)",display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}})),U="".concat("/api"),W=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).pwdChange=function(e){a.setState({pwd:e.target.value}),e.target.value.toString().length>=8?a.setState({validPwd:!0}):a.setState({validPwd:!1})},a.usernameChange=function(e){a.setState({username:e.target.value}),e.target.value.toString().length>=5?a.setState({validUsername:!0}):a.setState({validUsername:!1})},a.submit=function(e){if(e.preventDefault(),a.state.username.toString().length>=5?a.setState({validUsername:!0}):a.setState({validUsername:!1}),a.state.pwd.toString().length>=8?a.setState({validPwd:!0}):a.setState({validPwd:!1}),a.state.validUsername&&a.state.validPwd){var t={username:a.state.username,password:a.state.pwd};_.a.post(U+"/login",T.stringify(t),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(e){a.setState({errors:""}),e.data.token&&(c.reactLocalStorage.remove("token"),c.reactLocalStorage.set("token",e.data.token)),a.props.setAuth(!0),a.props.history.replace("/"),_.a.get(U+"/profile",{headers:{Authorization:"token "+e.data.token}}).then((function(e){var t;e.data.is_customer?t="customer":e.data.is_room_manager&&(t="roomManager"),c.reactLocalStorage.remove("role"),c.reactLocalStorage.set("role",t),a.props.setRole(t)}))})).catch((function(e){if(e.response){var t=e.response.data,n="";for(var r in t)n+=t[r][0]+"\n";a.setState({errors:n})}else console.log("Error: Network Error\n"+e)}))}},a.state={username:"",pwd:"",role:"",validUsername:!0,validPwd:!0,validRole:!1,errors:""},a}return Object(g.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("form",{className:this.props.classes.form},r.a.createElement(x.a,{container:!0,spacing:2},r.a.createElement(x.a,{item:!0,xs:12},r.a.createElement(v.a,{error:!this.state.validUsername,variant:"outlined",required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",autoComplete:"username",onChange:this.usernameChange})),r.a.createElement(x.a,{item:!0,xs:12},r.a.createElement(v.a,{error:!this.state.validPwd,variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:this.pwdChange})),r.a.createElement(x.a,{item:!0,xs:12},r.a.createElement(P.a,{error:!0},this.state.errors))),r.a.createElement(E.a,{fullWidth:!0,variant:"contained",color:"primary",className:this.props.classes.submit,onClick:this.submit},"Login"),r.a.createElement(x.a,{container:!0,justify:"flex-end"},r.a.createElement(x.a,{item:!0},r.a.createElement(S.a,{href:"/signup",onClick:function(t){t.preventDefault(),e.props.history.push("/signup")},variant:"body2"},"Don't have an account? SignUp")))))}}]),t}(r.a.Component);function z(e){var t=F();return r.a.createElement(N.a,{component:"main",maxWidth:"xs"},r.a.createElement(f.a,null),r.a.createElement("div",{className:t.paper},r.a.createElement(h.a,{className:t.avatar},r.a.createElement(w.a,null)),r.a.createElement(k.a,{component:"h1",variant:"h5"},"Login"),r.a.createElement(W,Object.assign({classes:t},e))))}var Y=a(9),q=a(374),H=a(965),G=a(966),V=a(915),J=a(376),K=a.n(J),X=a(246),$=a.n(X),Q=a(967),Z=a(387),ee=a(2),te=a(377),ae=a.n(te),ne=a(969),re=a(957),le=a(983),oe=a(916),ie=a(970),se=a(247),ce=a.n(se),me=a(971),ue=a(972),de=a(119),pe=a.n(de),ge=a(378),he=a.n(ge),Ee=a(120),fe=a.n(Ee),ve=Object(C.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},toolbar:{paddingRight:24},toolbarIcon:Object(q.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),appBar:{position:"absolute",zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:340,width:"calc(100% - ".concat(340,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButtonHidden:{display:"none"},title:{flexGrow:1},drawerPaper:{position:"absolute",whiteSpace:"nowrap",width:340,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:Object(Y.a)({overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:e.spacing(7)},e.breakpoints.up("sm"),{width:e.spacing(9)})}}));function be(e){var t=ve(),a=r.a.useState(null),n=Object(i.a)(a,2),l=n[0],o=n[1],m=r.a.useState(!0===e.auth),u=Object(i.a)(m,2),d=u[0],p=u[1],g=Boolean(l),h=Object(s.f)(),f=function(){o(null)},v=function(){e.setAuth(!1),c.reactLocalStorage.remove("token"),c.reactLocalStorage.remove("role"),f()};return r.a.createElement("div",{className:t.root},r.a.createElement(H.a,{className:Object(ee.a)(t.appBar,d&&t.appBarShift)},r.a.createElement(G.a,{className:t.toolbar},e.auth&&r.a.createElement(V.a,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:function(){p(!0)},className:Object(ee.a)(t.menuButton,d&&t.menuButtonHidden)},r.a.createElement(K.a,null)),r.a.createElement(k.a,{variant:"h6",className:t.title,onClick:function(){e.history.replace("/")}},e.title),e.auth&&r.a.createElement("div",null,r.a.createElement(V.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){o(e.currentTarget)},color:"inherit"},r.a.createElement($.a,null)),r.a.createElement(Z.a,{id:"menu-appbar",anchorEl:l,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:g,onClose:f},r.a.createElement(Q.a,{onClick:function(){e.history.push("/profile"),f()}},"Profile"),r.a.createElement(Q.a,{onClick:v},"Logout"))),!e.auth&&r.a.createElement(E.a,{color:"inherit",onClick:function(){e.history.push("/login")}},"Login"))),e.auth&&r.a.createElement(le.a,{position:"absolute",variant:"permanent",classes:{paper:Object(ee.a)(t.drawerPaper,!d&&t.drawerPaperClose)},open:d},r.a.createElement("div",{className:t.toolbarIcon},r.a.createElement(V.a,{onClick:function(){p(!1)}},r.a.createElement(ae.a,null))),r.a.createElement(ne.a,null),r.a.createElement(re.a,null,"customer"===e.role&&r.a.createElement("div",null,r.a.createElement(oe.a,{button:!0,onClick:function(){h.push("/")}},r.a.createElement(ie.a,null,r.a.createElement(ce.a,null)),r.a.createElement(me.a,{primary:"Customer Dashboard"})),r.a.createElement(oe.a,{button:!0,onClick:function(){h.push("/book")}},r.a.createElement(ie.a,null,r.a.createElement(pe.a,null)),r.a.createElement(me.a,{primary:"Book a new room"}))),"roomManager"===e.role&&r.a.createElement("div",null,r.a.createElement(oe.a,{button:!0,onClick:function(){h.push("/")}},r.a.createElement(ie.a,null,r.a.createElement(ce.a,null)),r.a.createElement(me.a,{primary:"Room Manager Dashboard"})),r.a.createElement(oe.a,{button:!0,onClick:function(){h.push("/rooms")}},r.a.createElement(ie.a,null,r.a.createElement(fe.a,null)),r.a.createElement(me.a,{primary:"Manage Rooms and TimeSlots"})))),r.a.createElement(ne.a,null),r.a.createElement(re.a,null,r.a.createElement("div",null,r.a.createElement(ue.a,{inset:!0},"Account"),r.a.createElement(oe.a,{button:!0,onClick:function(){e.history.push("/profile")}},r.a.createElement(ie.a,null,r.a.createElement($.a,null)),r.a.createElement(me.a,{primary:"Profile"})),r.a.createElement(oe.a,{button:!0,onClick:v},r.a.createElement(ie.a,null,r.a.createElement(he.a,null)),r.a.createElement(me.a,{primary:"Logout"}))))))}var Se=a(388);function xe(e){return r.a.createElement(k.a,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0},e.children)}var ye=Object(C.a)({depositContext:{flex:1,cursor:"pointer"}});function we(e,t){for(var a=e+"";a.length<t;)a="0"+a;return a}function ke(e,t){e=e.replace("-","").replace("-","");var a,n=parseInt(e),r=new Date;return a=parseInt(we(r.getFullYear(),4)+we(r.getMonth()+1,2)+we(r.getDate(),2)),console.log(n,a),"upcoming"===t?n>a:"past"===t?n<a:"today"===t?n===a:"all"===t||void 0}function Ce(e){var t=ye(),a=0;for(var n in e.rooms)ke(e.rooms[n].date,e.curr)&&a++;return r.a.createElement(r.a.Fragment,null,r.a.createElement(xe,null,e.title),r.a.createElement("br",null),r.a.createElement(k.a,{component:"p",variant:"h4"},a),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(k.a,{color:"textSecondary",className:t.depositContext},r.a.createElement(S.a,{href:"",onClick:function(t){t.preventDefault(),e.setCurr(e.curr)}}," See all ",e.title)))}var Ne=a(121),je=a.n(Ne),De=a(978),Oe=a(981),Be=a(968),Pe=a(917),Ae=a(76),_e=a.n(Ae),Te=a(973),Le=a(975),Re=a(974),Me=Object(C.a)({root:{maxWidth:305},media:{height:140}});function Ie(e){var t=Me();return r.a.createElement(Te.a,{className:t.root},r.a.createElement(Re.a,{className:t.media,image:e.imgLink,title:"Customer"}),r.a.createElement(Le.a,null,r.a.createElement(k.a,{gutterBottom:!0,variant:"h5",component:"h2"},e.name),r.a.createElement(k.a,{variant:"h6",color:"textSecondary",component:"p"},"Username : ",e.username),r.a.createElement(k.a,{variant:"h6",color:"textSecondary",component:"p"},"Email : ",e.email)))}var Fe=a(379),Ue=a.n(Fe),We=a(380),ze=a.n(We),Ye=Object(C.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:e.spacing(3,5,4),width:"25%"},closeBtn:{float:"right",padding:"0"},delRoom:{float:"right",margin:"44px 0px 0 ",transform:"translateY(-50%)",cursor:"pointer"}}}));function qe(e){var t=Ye(),a=r.a.useState(!1),n=Object(i.a)(a,2),l=n[0],o=n[1],s=function(){o(!0)},c=function(){o(!1)};return r.a.createElement("div",null,e.customer&&r.a.createElement(E.a,{variant:"contained",color:"primary",className:t.delRoom,startIcon:r.a.createElement(Ue.a,null),onClick:s},"View Customer"),e.roomManager&&r.a.createElement(E.a,{variant:"contained",color:"primary",className:t.delRoom,startIcon:r.a.createElement(ze.a,null),onClick:s},"View Owner"),r.a.createElement(Oe.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:t.modal,open:l,onClose:c,closeAfterTransition:!0,BackdropComponent:Be.a,BackdropProps:{timeout:500}},r.a.createElement(Pe.a,{in:l},r.a.createElement(Se.a,{className:t.paper},r.a.createElement(V.a,{className:t.closeBtn,onClick:c},r.a.createElement(_e.a,null)),r.a.createElement("div",{style:{textAlign:"center",marginTop:"50px"}},r.a.createElement("div",{style:{width:"fit-content",position:"relative",left:"50%",transform:"translateX(-50%)"}},r.a.createElement(Ie,e)))))))}var He=Object(C.a)((function(e){return{listPaper:{width:"100%",padding:"0 2%"},roomTitle:{float:"left",margin:"11px 10px"},roomName:{float:"left",marginRight:"10%"},delRoom:{float:"right",margin:"44px 0px 0 ",transform:"translateY(-50%)",cursor:"pointer"}}}));function Ge(e){var t=parseInt(e.split(":")[0]),a=" AM";return t>12&&(t-=12,a=" PM"),t+":"+e.split(":")[1]+a}function Ve(e){var t=He();return r.a.createElement(oe.a,null,r.a.createElement(Se.a,{className:t.listPaper},r.a.createElement(me.a,{className:t.roomName},r.a.createElement(x.a,{style:{textAlign:"center"}},r.a.createElement("h3",{style:{marginBottom:"5px"}},e.booking.time_slot.room_id.name),r.a.createElement(P.a,{style:{margin:"2px",textAlign:"center"}},"Room"))),r.a.createElement(me.a,{className:t.roomTitle},r.a.createElement(x.a,{style:{textAlign:"center"}},r.a.createElement("h3",{style:{marginBottom:"5px"}},e.booking.date))),r.a.createElement(me.a,{className:t.roomTitle},r.a.createElement(x.a,{style:{textAlign:"center"}},r.a.createElement("h3",{style:{marginBottom:"5px"}},Ge(e.booking.time_slot.time_from)))),r.a.createElement(De.a,{color:"text.secondary",className:t.roomTitle,style:{marginTop:"19px"}},r.a.createElement("h3",null,"to")),r.a.createElement(me.a,{className:t.roomTitle},r.a.createElement(x.a,{style:{textAlign:"center"}},r.a.createElement("h3",{style:{marginBottom:"5px"}},Ge(e.booking.time_slot.time_to)))),!e.roomManager&&function(e){e=e.replace("-","").replace("-","");var t=parseInt(e),a=new Date;return t>=parseInt(Je(a.getFullYear(),4)+Je(a.getMonth()+1,2)+Je(a.getDate(),2))}(e.booking.date)&&r.a.createElement(V.a,{className:t.delRoom,onClick:function(t){t.preventDefault(),_.a.delete(Xe+"/bookings/"+e.booking.id,{headers:{Authorization:"token "+c.reactLocalStorage.get("token")}}).then((function(t){e.setDel(!e.del)}))}},r.a.createElement(je.a,null)),e.roomManager&&r.a.createElement(qe,{customer:!0,name:e.booking.customer.first_name+" "+e.booking.customer.last_name,username:e.booking.customer.username,email:e.booking.customer.email,imgLink:"https://material-ui.com/static/images/cards/contemplative-reptile.jpg"}),e.customer&&r.a.createElement(qe,{roomManager:!0,name:e.booking.time_slot.room_id.owner.first_name+" "+e.booking.time_slot.room_id.owner.last_name,username:e.booking.time_slot.room_id.owner.username,email:e.booking.time_slot.room_id.owner.email,imgLink:"https://material-ui.com/static/images/cards/contemplative-reptile.jpg"})))}function Je(e,t){for(var a=e+"";a.length<t;)a="0"+a;return a}function Ke(e,t){e=e.replace("-","").replace("-","");var a,n=parseInt(e),r=new Date;return a=parseInt(Je(r.getFullYear(),4)+Je(r.getMonth()+1,2)+Je(r.getDate(),2)),console.log(n,a),"upcoming"===t?n>a:"past"===t?n<a:"today"===t?n===a:"all"===t||void 0}var Xe="".concat("/api");function $e(e){var t,a=0;for(var n in e.rows)Ke(e.rows[n].date,e.curr)&&a++;"upcoming"===e.curr?t="Upcoming Bookings":"past"===e.curr?t="Past Bookings":"today"===e.curr?t="Today's Bookings":"new"===e.curr?t="New Booking":"all"===e.curr&&(t="All Bookings");var l=e.rows;return r.a.createElement(r.a.Fragment,null,r.a.createElement(xe,null,t),r.a.createElement(re.a,null,l.map((function(t){return Ke(t.date,e.curr)?r.a.createElement(Ve,{roomManager:e.roomManager,customer:e.customer,curr:e.curr,key:t.id,booking:t,setDel:e.setDel,del:e.del}):null})),!a&&r.a.createElement(k.a,{color:"textSecondary",style:{textAlign:"center"}},"No bookings to display!")))}var Qe=a(976),Ze=Object(C.a)((function(e){return{root:{display:"flex",marginLeft:e.spacing(7)},appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240},addBtn:{position:"fixed",right:"3%",bottom:"3%"},extendedIcon:{marginRight:e.spacing(1)}}})),et="".concat("/api");function tt(e){var t=Ze(),a=r.a.useState([]),l=Object(i.a)(a,2),o=l[0],s=l[1],m=r.a.useState(!0),u=Object(i.a)(m,2),d=u[0],p=u[1],g=r.a.useState("today"),h=Object(i.a)(g,2),E=h[0],v=h[1],b=Object(ee.a)(t.paper,t.fixedHeight);return Object(n.useEffect)((function(){_.a.get(et+"/bookings",{headers:{Authorization:"token "+c.reactLocalStorage.get("token")}}).then((function(e){s(e.data)}))}),[d]),r.a.createElement("div",{className:t.root},r.a.createElement(f.a,null),r.a.createElement("main",{className:t.content},r.a.createElement("div",{className:t.appBarSpacer}),r.a.createElement(N.a,{maxWidth:"lg",className:t.container},r.a.createElement(x.a,{container:!0,spacing:3},r.a.createElement(x.a,{item:!0,xs:12,md:4,lg:3},r.a.createElement(Se.a,{className:b},r.a.createElement(Ce,{curr:"today",title:"Today's Bookings",rooms:o,setDel:p,del:d,setCurr:v}))),r.a.createElement(x.a,{item:!0,xs:12,md:4,lg:3},r.a.createElement(Se.a,{className:b},r.a.createElement(Ce,{curr:"upcoming",title:"Upcoming Bookings",rooms:o,setDel:p,del:d,setCurr:v}))),r.a.createElement(x.a,{item:!0,xs:12,md:4,lg:3},r.a.createElement(Se.a,{className:b},r.a.createElement(Ce,{curr:"past",title:"Past Bookings",rooms:o,setDel:p,del:d,setCurr:v}))),r.a.createElement(x.a,{item:!0,xs:12,md:4,lg:3},r.a.createElement(Se.a,{className:b},r.a.createElement(Ce,{curr:"all",title:"All Bookings",rooms:o,setDel:p,del:d,setCurr:v}))),r.a.createElement(x.a,{item:!0,xs:12},r.a.createElement(Se.a,{className:t.paper},r.a.createElement($e,{roomManager:!0,curr:E,rows:o,setDel:p,del:d}),"new"===E&&r.a.createElement($e,{rows:o,setDel:p,del:d}))))),r.a.createElement(Qe.a,{variant:"extended",color:"primary","aria-label":"add",className:t.addBtn,onClick:function(){e.history.push("/rooms")}},r.a.createElement(fe.a,{className:t.extendedIcon}),"Manage Rooms")))}var at=Object(C.a)((function(e){return{root:{display:"flex",marginLeft:e.spacing(7)},appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240},addBtn:{position:"fixed",right:"3%",bottom:"3%",height:"70px",width:"70px"}}})),nt="".concat("/api");function rt(e){var t=at(),a=r.a.useState([]),l=Object(i.a)(a,2),o=l[0],s=l[1],m=r.a.useState(!0),u=Object(i.a)(m,2),d=u[0],p=u[1],g=r.a.useState("today"),h=Object(i.a)(g,2),E=h[0],v=h[1],b=Object(ee.a)(t.paper,t.fixedHeight);return Object(n.useEffect)((function(){_.a.get(nt+"/bookings",{headers:{Authorization:"token "+c.reactLocalStorage.get("token")}}).then((function(e){s(e.data)}))}),[d]),r.a.createElement("div",{className:t.root},r.a.createElement(f.a,null),r.a.createElement("main",{className:t.content},r.a.createElement("div",{className:t.appBarSpacer}),r.a.createElement(N.a,{maxWidth:"lg",className:t.container},r.a.createElement(x.a,{container:!0,spacing:3},r.a.createElement(x.a,{item:!0,xs:12,md:4,lg:3},r.a.createElement(Se.a,{className:b},r.a.createElement(Ce,{curr:"today",title:"Today's Bookings",rooms:o,setDel:p,del:d,setCurr:v}))),r.a.createElement(x.a,{item:!0,xs:12,md:4,lg:3},r.a.createElement(Se.a,{className:b},r.a.createElement(Ce,{curr:"upcoming",title:"Upcoming Bookings",rooms:o,setDel:p,del:d,setCurr:v}))),r.a.createElement(x.a,{item:!0,xs:12,md:4,lg:3},r.a.createElement(Se.a,{className:b},r.a.createElement(Ce,{curr:"past",title:"Past Bookings",rooms:o,setDel:p,del:d,setCurr:v}))),r.a.createElement(x.a,{item:!0,xs:12,md:4,lg:3},r.a.createElement(Se.a,{className:b},r.a.createElement(Ce,{curr:"all",title:"All Bookings",rooms:o,setDel:p,del:d,setCurr:v}))),r.a.createElement(x.a,{item:!0,xs:12},r.a.createElement(Se.a,{className:t.paper},r.a.createElement($e,{customer:!0,curr:E,rows:o,setDel:p,del:d}))))),r.a.createElement(Qe.a,{color:"primary",size:"large","aria-label":"add",className:t.addBtn,onClick:function(){e.history.push("/book")}},r.a.createElement(pe.a,null))))}var lt=a(181),ot=a(21),it=a(977),st=a(381),ct=a.n(st),mt=Object(C.a)((function(e){return{listPaper:{width:"100%",padding:"0 2%",cursor:"pointer"},roomTitle:{float:"left",margin:"5px"},roomSr:{float:"left",margin:"5px",marginRight:"20px"},numDays:{float:"right",margin:"0px 10% 0 0",transform:"translateY(-10%)",textAlign:"center",cursor:"pointer"},numDaysH3:{marginBottom:"5px"}}}));function ut(e,t){for(var a=e+"";a.length<t;)a="0"+a;return a}function dt(e){return ut(e.getFullYear(),4)+"-"+ut(e.getMonth()+1,2)+"-"+ut(e.getDate(),2)}function pt(e){var t=mt(),a=r.a.useState(!1),n=Object(i.a)(a,2),l=n[0],o=n[1],s=" AM",m=" AM",u=parseInt(e.timeslot.time_from.split(":")[0]),d=parseInt(e.timeslot.time_to.split(":")[0]);u>12&&(u-=12,s=" PM"),d>12&&(d-=12,m=" PM");return r.a.createElement(oe.a,null,r.a.createElement(Se.a,{className:t.listPaper,onClick:l?void 0:function(){o(!0)}},r.a.createElement(me.a,{className:t.roomSr},r.a.createElement("h3",null,e.sr)),r.a.createElement(me.a,{className:t.roomTitle},r.a.createElement("h3",null,u+":"+e.timeslot.time_from.split(":")[1]+s)),r.a.createElement(De.a,{color:"text.secondary",className:t.roomTitle,style:{marginTop:"12px"}},r.a.createElement("h3",null,"to")),r.a.createElement(me.a,{className:t.roomTitle},r.a.createElement("h3",null,d+":"+e.timeslot.time_to.split(":")[1]+m)),l&&r.a.createElement("div",null,r.a.createElement(oe.a,null,r.a.createElement(k.a,{component:"div",style:{width:"100%",display:"block"}},r.a.createElement(De.a,{color:"text.secondary",style:{marginTop:"0",fontWeight:"bold"}},"Are you sure you want to book room ",e.room," on ",dt(e.date)," from ",u+":"+e.timeslot.time_from.split(":")[1]+s," to ",d+":"+e.timeslot.time_to.split(":")[1]+m," ?"))),r.a.createElement(me.a,null,r.a.createElement(E.a,{variant:"outlined",color:"primary",onClick:function(){_.a.post(gt+"/bookings",{date:dt(e.date),time_slot:e.timeslot.id},{headers:{Authorization:"token "+c.reactLocalStorage.get("token")}}).then((function(){e.setDel(!e.del)})).catch((function(){}))},style:{float:"right"}},"YES"),r.a.createElement(E.a,{variant:"outlined",color:"secondary",onClick:function(){o(!1)},style:{float:"right",margin:"0 10px 10px 10px"}},"NO")))))}var gt="".concat("/api");function ht(e){var t=e.rows;return r.a.createElement(r.a.Fragment,null,r.a.createElement(re.a,null,t.time_slots.map((function(t){var a=!0;for(var n in t.bookings){var l=new Date(t.bookings[n].date);e.date&&l.getDate()===e.date.getDate()&&l.getMonth()===e.date.getMonth()&&(a=!1)}return a?r.a.createElement(pt,{key:t.id,date:e.date,room:e.rows.name,timeslot:t,setDel:e.setDel,del:e.del}):null})),!t.time_slots.length&&r.a.createElement(k.a,{color:"textSecondary",style:{textAlign:"center"}},"No timeslots available!")))}var Et=Object(C.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:e.spacing(3,5,4),width:"35%"},closeBtn:{float:"right",padding:"0"},delRoom:{float:"right",margin:"33px 0px 0 ",transform:"translateY(-50%)",cursor:"pointer"}}}));function ft(e){var t=Et(),a=r.a.useState(!1),n=Object(i.a)(a,2),l=n[0],o=n[1],s=function(){o(!1)};return r.a.createElement("div",null,r.a.createElement(V.a,{className:t.delRoom,onClick:function(){o(!0)}},r.a.createElement(ct.a,null)),r.a.createElement(Oe.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:t.modal,open:l,onClose:s,closeAfterTransition:!0,BackdropComponent:Be.a,BackdropProps:{timeout:500}},r.a.createElement(Pe.a,{in:l},r.a.createElement(Se.a,{className:t.paper},r.a.createElement(V.a,{className:t.closeBtn,onClick:s},r.a.createElement(_e.a,null)),r.a.createElement("h1",{id:"transition-modal-title",style:{textAlign:"center",marginBottom:"5px"}},"Pick a TimeSlot to Book"),r.a.createElement(k.a,{color:"textSecondary",style:{textAlign:"center",marginBottom:"30px"}},"for ",e.rows.name," room "),console.log(e.rows),r.a.createElement(ht,{date:e.date,rows:e.rows,del:e.del,setDel:e.setDel})))))}var vt=Object(C.a)((function(e){return{root:{display:"flex",marginLeft:e.spacing(7)},appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4),textAlign:"center"},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column",textAlign:"left"},fixedHeight:{height:240},addBtn:{position:"fixed",right:"3%",bottom:"3%",height:"70px",width:"70px"},listPaper:{width:"100%",padding:"0 2%"},delRoom:{float:"right",margin:"44px 0px 0 ",transform:"translateY(-50%)",cursor:"pointer"}}})),bt="".concat("/api");function St(e){var t=vt();return r.a.createElement(oe.a,null,r.a.createElement(Se.a,{className:t.listPaper},r.a.createElement(me.a,{className:t.roomName},r.a.createElement(x.a,{style:{float:"left"}},r.a.createElement("h3",{style:{marginBottom:"5px"}},e.rooms.name),r.a.createElement(P.a,{style:{margin:"2px"}},"Room"))),r.a.createElement(ft,{rows:e.rooms,date:e.date,del:e.del,setDel:e.setDel})))}function xt(e){var t=vt(),a=r.a.useState(null),l=Object(i.a)(a,2),o=l[0],s=l[1],m=r.a.useState([]),u=Object(i.a)(m,2),d=u[0],p=u[1],g=r.a.useState(!1),h=Object(i.a)(g,2),E=h[0],v=h[1],b=0;return Object(n.useEffect)((function(e){_.a.get(bt+"/rooms",{headers:{Authorization:"token "+c.reactLocalStorage.get("token")}}).then((function(e){p(e.data)}))}),[E,o]),r.a.createElement("div",{className:t.root},r.a.createElement(f.a,null),r.a.createElement("main",{className:t.content},r.a.createElement("div",{className:t.appBarSpacer}),r.a.createElement(N.a,{maxWidth:"lg",className:t.container},r.a.createElement(De.a,{color:"text.secondary",style:{textAlign:"center"}},r.a.createElement("h2",null,"Pick a date to book")),r.a.createElement(ot.a,{utils:lt.a},r.a.createElement(it.a,{margin:"normal",id:"time-picker",label:"Date",value:o,onChange:function(e){s(e)},KeyboardButtonProps:{"aria-label":"change time"}})),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(Se.a,{className:t.paper},r.a.createElement("div",{style:{alignSelf:"baseline"}},r.a.createElement(xe,null,"Available Rooms")),r.a.createElement(re.a,null,d.map((function(e){var t=new Date,a=!1;for(var n in e.time_slots){var l=!0;for(var i in e.time_slots[n].bookings){var s=new Date(e.time_slots[n].bookings[i].date);o&&s.getDate()===o.getDate()&&s.getMonth()===o.getMonth()&&(l=!1),console.log(s,o)}l&&(a=!0)}return o&&a&&Math.ceil((o-t)/864e5)>=0&&Math.ceil((o-t)/864e5)<=e.num_days_in_adv?(b++,r.a.createElement(St,{date:o,key:e.id,rooms:e,setDel:v,del:E})):null})),!b&&o&&r.a.createElement(k.a,{color:"textSecondary",style:{textAlign:"center"}},"No rooms available for the date!"),!b&&!o&&r.a.createElement(k.a,{color:"textSecondary",style:{textAlign:"center"}},"Pick a date to book!"))))))}var yt=a(914),wt=a(956),kt=Object(C.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:e.spacing(3,5,4),width:"35%"},closeBtn:{float:"right",padding:"0"}}})),Ct="".concat("/api");function Nt(e){var t=kt(),a=r.a.useState(!1),n=Object(i.a)(a,2),l=n[0],o=n[1],s=r.a.useState(""),m=Object(i.a)(s,2),u=m[0],d=m[1],p=r.a.useState(0),g=Object(i.a)(p,2),h=g[0],f=g[1],b=function(){o(!1)};return r.a.createElement("div",null,r.a.createElement(E.a,{variant:"contained",color:"primary",startIcon:r.a.createElement(pe.a,null),onClick:function(){o(!0)}},"Add room"),r.a.createElement(Oe.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:t.modal,open:l,onClose:b,closeAfterTransition:!0,BackdropComponent:Be.a,BackdropProps:{timeout:500}},r.a.createElement(Pe.a,{in:l},r.a.createElement(Se.a,{className:t.paper},r.a.createElement(V.a,{className:t.closeBtn,onClick:b},r.a.createElement(_e.a,null)),r.a.createElement("h1",{id:"transition-modal-title",style:{textAlign:"center"}},"Add Room"),r.a.createElement(yt.a,{style:{alignItems:"center"}},r.a.createElement(v.a,{variant:"outlined",required:!0,fullWidth:!0,id:"name",label:"Name of the room",name:"name",onChange:function(e){d(e.target.value)}}),r.a.createElement(wt.a,{type:"number",className:t.numField,onChange:function(e){f(e.target.value)},variant:"outlined",required:!0,fullWidth:!0,id:"name",label:"Name of the room",name:"name",placeholder:"Max days to book in advance"}),r.a.createElement("br",null),r.a.createElement(E.a,{variant:"contained",style:{width:"50%"},color:"primary",onClick:function(){_.a.post(Ct+"/rooms",{name:u,num_days_in_adv:h},{headers:{Authorization:"token "+c.reactLocalStorage.get("token")}}).then((function(){o(!1),e.setDel(!e.del)}))}},"Add Room"))))))}var jt=Object(C.a)({depositContext:{flex:1}});function Dt(e){var t=jt(),a=0;for(var n in e.rooms)a+=e.rooms[n].time_slots.length;return r.a.createElement(r.a.Fragment,null,r.a.createElement(xe,null,"Total Rooms"),r.a.createElement(k.a,{component:"p",variant:"h4"},e.rooms.length),r.a.createElement(k.a,{color:"textSecondary",className:t.depositContext},a," timeslot",a>1&&"s"," in total"),r.a.createElement("div",null,r.a.createElement(Nt,e)))}var Ot=a(383),Bt=a.n(Ot),Pt=a(382),At=a.n(Pt),_t=a(984),Tt=Object(C.a)((function(e){return{listPaper:{width:"100%",padding:"0 2%"},roomTitle:{float:"left",margin:"5px"},roomSr:{float:"left",margin:"5px",marginRight:"20px"},delTimeSlot:{float:"right",margin:"33px 0px 0 ",transform:"translateY(-50%)",cursor:"pointer"}}}));function Lt(e){var t=Tt(),a=" AM",n=" AM",l=parseInt(e.timeslot.time_from.split(":")[0]),o=parseInt(e.timeslot.time_to.split(":")[0]);l>12&&(l-=12,a=" PM"),o>12&&(o-=12,n=" PM");return r.a.createElement(oe.a,null,r.a.createElement(Se.a,{className:t.listPaper},r.a.createElement(me.a,{className:t.roomSr},r.a.createElement("h3",null,e.sr)),r.a.createElement(me.a,{className:t.roomTitle},r.a.createElement("h3",null,l+":"+e.timeslot.time_from.split(":")[1]+a)),r.a.createElement(De.a,{color:"text.secondary",className:t.roomTitle,style:{marginTop:"12px"}},r.a.createElement("h3",null,"to")),r.a.createElement(me.a,{className:t.roomTitle},r.a.createElement("h3",null,o+":"+e.timeslot.time_to.split(":")[1]+n)),r.a.createElement(V.a,{className:t.delTimeSlot,onClick:function(t){t.preventDefault(),_.a.delete(Rt+"/timeslots/"+e.timeslot.id,{headers:{Authorization:"token "+c.reactLocalStorage.get("token")}}).then((function(){e.setDel(!e.del),e.setDelP(!e.delP)}))}},r.a.createElement(je.a,null))))}var Rt="".concat("/api");function Mt(e){var t=e.rows;return r.a.createElement(r.a.Fragment,null,r.a.createElement(re.a,null,t.map((function(t){return r.a.createElement(Lt,{key:t.id,sr:t.sr,timeslot:t,setDel:e.setDel,del:e.del,delP:e.delP,setDelP:e.setDelP})})),!t.length&&r.a.createElement(k.a,{color:"textSecondary",style:{textAlign:"center"}},"No timeslots to display!")))}var It=Object(C.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:e.spacing(3,5,4),width:"35%"},closeBtn:{float:"right",padding:"0"},timeslotsIcon:{float:"right",margin:"33px 0px 0 ",transform:"translateY(-50%)",cursor:"pointer"}}})),Ft="".concat("/api");function Ut(e){var t=It(),a=r.a.useState(!1),l=Object(i.a)(a,2),o=l[0],s=l[1],m=function(){s(!1)},u=r.a.useState(new Date("2014-08-18T10:00:00")),d=Object(i.a)(u,2),p=d[0],g=d[1],h=r.a.useState(new Date("2014-08-18T18:00:00")),f=Object(i.a)(h,2),v=f[0],b=f[1],S=r.a.useState(""),x=Object(i.a)(S,2),y=x[0],w=x[1],C=r.a.useState(!1),N=Object(i.a)(C,2),j=N[0],D=N[1],O=r.a.useState([]),B=Object(i.a)(O,2),A=B[0],T=B[1];Object(n.useEffect)((function(){_.a.get(Ft+"/timeslots?room_id="+e.roomId,{headers:{Authorization:"token "+c.reactLocalStorage.get("token")}}).then((function(e){T(e.data)}))}),[j]);return r.a.createElement("div",null,r.a.createElement(V.a,{className:t.timeslotsIcon,onClick:function(){s(!0)}},r.a.createElement(At.a,null)),r.a.createElement(Oe.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:t.modal,open:o,onClose:m,closeAfterTransition:!0,BackdropComponent:Be.a,BackdropProps:{timeout:500}},r.a.createElement(Pe.a,{in:o},r.a.createElement(Se.a,{className:t.paper},r.a.createElement(V.a,{className:t.closeBtn,onClick:m},r.a.createElement(_e.a,null)),r.a.createElement("h1",{id:"transition-modal-title",style:{textAlign:"center",marginBottom:"5px"}},"Manage TimeSlots"),r.a.createElement(k.a,{color:"textSecondary",style:{textAlign:"center",marginBottom:"30px"}},"for ",e.roomName," room "),A.map((function(t,a){return r.a.createElement(Mt,{key:t.id,rows:[{sr:a+1,id:t.id,time_from:t.time_from,time_to:t.time_to}],del:j,setDel:D,delP:e.del,setDelP:e.setDel})})),r.a.createElement(yt.a,{style:{alignItems:"center"}},r.a.createElement(ot.a,{utils:lt.a},r.a.createElement(_t.a,{margin:"normal",id:"time-picker",label:"Time From",value:p,onChange:function(e){g(e)},KeyboardButtonProps:{"aria-label":"change time"}}),r.a.createElement(_t.a,{margin:"normal",id:"time-picker",label:"Time To",value:v,onChange:function(e){b(e)},KeyboardButtonProps:{"aria-label":"change time"}})),r.a.createElement(P.a,{error:!0},y),r.a.createElement("br",null),r.a.createElement(E.a,{variant:"contained",style:{width:"50%"},color:"primary",onClick:function(){console.log(p.toTimeString().split(" ")),_.a.post(Ft+"/timeslots",{time_from:p.toTimeString().split(" ")[0],time_to:v.toTimeString().split(" ")[0],room_id:e.roomId},{headers:{Authorization:"token "+c.reactLocalStorage.get("token")}}).then((function(){D(!j),e.setDel(!e.del)})).catch((function(e){var t="",a=e.response.data;for(var n in a)for(var r in a[n])t+=a[n][r];w(t)}))}},"Add Slot"))))))}var Wt=Object(C.a)((function(e){return{seeMore:{marginTop:e.spacing(3)},listPaper:{width:"100%",padding:"0 2%"},roomTitle:{float:"left"},delRoom:{float:"right",margin:"33px 0px 0 ",transform:"translateY(-50%)",cursor:"pointer"},numDays:{float:"right",margin:"0px 10% 0 0",transform:"translateY(-10%)",textAlign:"center",cursor:"pointer"},numDaysH3:{marginBottom:"5px"}}}));function zt(e){var t=Wt(),a=r.a.useState(!1),n=Object(i.a)(a,2),l=n[0],o=n[1],s=r.a.useState(""),m=Object(i.a)(s,2),u=m[0],d=m[1],p=r.a.useState(""),g=Object(i.a)(p,2),h=g[0],E=g[1],f=r.a.useState(e.room),b=Object(i.a)(f,2),S=b[0],x=b[1];return r.a.createElement(oe.a,null,r.a.createElement(Se.a,{className:t.listPaper},r.a.createElement(me.a,{className:t.roomTitle},!l&&r.a.createElement("h3",null,S.name),l&&r.a.createElement("div",null,r.a.createElement(v.a,{type:"text",placeholder:S.name,onChange:function(e){e.preventDefault(),d(e.target.value)}}),r.a.createElement("br",null),r.a.createElement("br",null))),r.a.createElement(V.a,{className:t.delRoom,onClick:function(t){t.preventDefault(),_.a.delete(Yt+"/rooms/"+S.id,{headers:{Authorization:"token "+c.reactLocalStorage.get("token")}}).then((function(){e.setDel(!e.del)}))}},r.a.createElement(je.a,null)),!l&&r.a.createElement(V.a,{className:t.delRoom,onClick:function(e){e.preventDefault(),o(!0)}},r.a.createElement(fe.a,null)),l&&r.a.createElement(V.a,{className:t.delRoom,onClick:function(e){e.preventDefault(),console.log(u.length);var t={};u.length&&(t.name=u),h.length&&(t.num_days_in_adv=h),_.a.patch(Yt+"/rooms/"+S.id,t,{headers:{Authorization:"token "+c.reactLocalStorage.get("token")}}).then((function(e){x(e.data)})),o(!1)}},r.a.createElement(Bt.a,null)),r.a.createElement(Ut,{roomId:S.id,roomName:S.name,setDel:e.setDel,del:e.del}),r.a.createElement("div",{className:t.numDays},!l&&r.a.createElement("h3",{className:t.numDaysH3},S.num_days_in_adv),l&&r.a.createElement("div",null,r.a.createElement(wt.a,{type:"number",placeholder:S.num_days_in_adv.toString(),onChange:function(e){e.preventDefault(),E(e.target.value)}}),r.a.createElement("br",null)),"days to book in advance")))}var Yt="".concat("/api");function qt(e){var t=e.rows;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{textAlign:"left"}},r.a.createElement(xe,null,"My Rooms")),r.a.createElement(re.a,null,t.map((function(t){return r.a.createElement(zt,{key:t.id,room:t,setDel:e.setDel,del:e.del})})),!t.length&&r.a.createElement(k.a,{color:"textSecondary",style:{textAlign:"center"}},"No rooms to display!")))}var Ht=Object(C.a)((function(e){return{root:{display:"flex",marginLeft:e.spacing(7)},appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4),textAlign:"center"},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240},CenterTile:{position:"relative",left:"50%",transform:"translateX(-50%)"}}})),Gt="".concat("/api");function Vt(){var e=Ht(),t=r.a.useState([]),a=Object(i.a)(t,2),l=a[0],o=a[1],s=r.a.useState(!0),m=Object(i.a)(s,2),u=m[0],d=m[1],p=Object(ee.a)(e.paper,e.fixedHeight);return Object(n.useEffect)((function(){_.a.get(Gt+"/rooms",{headers:{Authorization:"token "+c.reactLocalStorage.get("token")}}).then((function(e){o(e.data)}))}),[u]),r.a.createElement("div",{className:e.root},r.a.createElement(f.a,null),r.a.createElement("main",{className:e.content},r.a.createElement("div",{className:e.appBarSpacer}),r.a.createElement(N.a,{maxWidth:"lg",className:e.container},r.a.createElement(De.a,{color:"text.secondary",style:{textAlign:"center"}},r.a.createElement("h2",null,"Manage Rooms")),r.a.createElement(x.a,{container:!0,spacing:3},r.a.createElement(x.a,{item:!0,xs:12,md:4,lg:3,className:e.CenterTile},r.a.createElement(Se.a,{className:p},r.a.createElement(Dt,{rooms:l,setDel:d,del:u}))),r.a.createElement(x.a,{item:!0,xs:12},r.a.createElement(Se.a,{className:e.paper},r.a.createElement(qt,{rows:l,setDel:d,del:u})))))))}var Jt=Object(C.a)((function(e){return{root:{marginTop:"100px"},heroContent:{backgroundColor:e.palette.background.paper,padding:e.spacing(8,0,6)},heroButtons:{marginTop:e.spacing(4)}}}));function Kt(e){var t=Jt();return r.a.createElement("div",{className:t.root},r.a.createElement(f.a,null),r.a.createElement("main",null,r.a.createElement("div",{className:t.heroContent},r.a.createElement(N.a,{maxWidth:"sm"},r.a.createElement(k.a,{component:"h1",variant:"h2",align:"center",color:"textPrimary",gutterBottom:!0,style:{marginBottom:"50px"}},"Room Slot Booking"),r.a.createElement(k.a,{variant:"h5",align:"center",color:"textSecondary",paragraph:!0},"This is a simple room slot booking app built using Django, Django-REST-Framework and React.js. Signup to get started or Login if you already have an account.",r.a.createElement("br",null),"This app is also available as API at ",r.a.createElement(S.a,{href:"/api"},"/api"),"."),r.a.createElement("div",{className:t.heroButtons},r.a.createElement(x.a,{container:!0,spacing:2,justify:"center"},r.a.createElement(x.a,{item:!0},r.a.createElement(E.a,{variant:"contained",color:"primary",onClick:function(){e.history.push("/signup")}},"Signup")),r.a.createElement(x.a,{item:!0},r.a.createElement(E.a,{variant:"outlined",color:"primary",onClick:function(){e.history.push("/login")}},"Login"))))))))}var Xt=Object(C.a)((function(e){return{root:{marginTop:"100px"},icon:{marginRight:e.spacing(2)},heroContent:{backgroundColor:e.palette.background.paper,padding:e.spacing(8,0,6)},heroButtons:{marginTop:e.spacing(4)},cardGrid:{paddingTop:e.spacing(8),paddingBottom:e.spacing(8)},card:{height:"100%",display:"flex",flexDirection:"column"},cardMedia:{paddingTop:"56.25%"},cardContent:{flexGrow:1},form:{width:"100%",marginTop:e.spacing(3)}}})),$t="".concat("/api"),Qt=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).fnameChange=function(e){e.preventDefault(),a.setState({fname:e.target.value}),console.log(e.target.value),e.target.value.toString().length>=3?a.setState({validFname:!0}):a.setState({validFname:!1})},a.lnameChange=function(e){e.preventDefault(),a.setState({lname:e.target.value}),console.log(e.target.value),e.target.value.toString().length>=3?a.setState({validLname:!0}):a.setState({validLname:!1})},a.emailChange=function(e){e.preventDefault(),a.setState({email:e.target.value}),console.log(e.target.value),B.a.isEmail(e.target.value)?a.setState({validEmail:!0}):a.setState({validEmail:!1})},a.pwdChange=function(e){e.preventDefault(),a.setState({pwd:e.target.value}),console.log(e.target.value),e.target.value.toString().length>=8?a.setState({validPwd:!0}):a.setState({validPwd:!1})},a.pwdConfChange=function(e){e.preventDefault(),a.setState({pwdConf:e.target.value}),console.log(e.target.value),e.target.value.toString()!==a.state.pwd?a.setState({validPwdConf:!1}):a.setState({validPwdConf:!0})},a.usernameChange=function(e){e.preventDefault(),a.setState({username:e.target.value}),console.log(e.target.value),e.target.value.toString().length>=5?a.setState({validUsername:!0}):a.setState({validUsername:!1})},a.submit=function(e){if(e.preventDefault(),a.state.fname.toString().length>=3?a.setState({validFname:!0}):a.setState({validFname:!1}),a.state.lname.toString().length>=3?a.setState({validLname:!0}):a.setState({validLname:!1}),a.state.username.toString().length>=5?a.setState({validUsername:!0}):a.setState({validUsername:!1}),B.a.isEmail(a.state.email)?a.setState({validEmail:!0}):a.setState({validEmail:!1}),a.state.pwd.toString().length>=8||0===a.state.pwd.toString().length?a.setState({validPwd:!0}):a.setState({validPwd:!1}),a.state.pwdConf!==a.state.pwd?a.setState({validPwdConf:!1}):a.setState({validPwdConf:!0}),a.state.role.toString().length>0?a.setState({validRole:!0}):a.setState({validRole:!1}),a.state.validFname&&a.state.validLname&&a.state.validUsername&&a.state.validEmail&&a.state.validPwd&&a.state.validPwdConf){var t={};0!==a.state.fname.toString().length&&(t.first_name=a.state.fname),0!==a.state.lname.toString().length&&(t.last_name=a.state.lname),0!==a.state.username.toString().length&&(t.username=a.state.username),0!==a.state.email.toString().length&&(t.email=a.state.email),0!==a.state.pwd.toString().length&&(t.pwd=a.state.pwd);var n={headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"token "+c.reactLocalStorage.get("token")}};console.log(JSON.stringify(t)),_.a.patch($t+"/profile",T.stringify(t),n).then((function(e){console.log(e),a.setState({edit:!1})})).catch((function(e){if(e.response){var t="",n=e.response.data;for(var r in n)for(var l in n[r])t+=n[r][l];a.setState({errorText:t})}else console.log("Error: Network Error\n"+e)}))}},a.handleLogout=function(){a.props.setAuth(!1),c.reactLocalStorage.remove("token"),c.reactLocalStorage.remove("role"),a.props.history.replace("/")},a.state={edit:!1,fname:"",lname:"",username:"",email:"",pwd:"",pwdConf:"",role:"",validFname:!0,validLname:!0,validUsername:!0,validEmail:!0,validPwd:!0,validPwdConf:!0,validRole:!1,errorText:""},a}return Object(g.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;_.a.get($t+"/profile",{headers:{Authorization:"token "+c.reactLocalStorage.get("token")}}).then((function(t){e.setState({username:t.data.username,fname:t.data.first_name,lname:t.data.last_name,email:t.data.email})})).catch((function(e){e.response?console.log(e.response.data.message):console.log("Error: Network Error\n"+e)}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,this.state.edit&&r.a.createElement("form",{className:this.props.classes.form},r.a.createElement(x.a,{container:!0,spacing:2},r.a.createElement(x.a,{item:!0,xs:12,sm:6},r.a.createElement(v.a,{error:!this.state.validFname,autoComplete:"fname",name:"firstName",variant:"outlined",required:!0,fullWidth:!0,id:"firstName",label:"First Name",onChange:this.fnameChange,defaultValue:this.state.fname})),r.a.createElement(x.a,{item:!0,xs:12,sm:6},r.a.createElement(v.a,{error:!this.state.validLname,variant:"outlined",required:!0,fullWidth:!0,id:"lastName",label:"Last Name",name:"lastName",autoComplete:"lname",onChange:this.lnameChange,defaultValue:this.state.lname})),r.a.createElement(x.a,{item:!0,xs:12},r.a.createElement(v.a,{error:!this.state.validUsername,variant:"outlined",required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",autoComplete:"username",onChange:this.usernameChange,defaultValue:this.state.username})),r.a.createElement(x.a,{item:!0,xs:12},r.a.createElement(v.a,{error:!this.state.validEmail,variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",onChange:this.emailChange,defaultValue:this.state.email})),r.a.createElement(x.a,{item:!0,xs:12},r.a.createElement(v.a,{error:!this.state.validPwd,variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"off",onChange:this.pwdChange})),r.a.createElement(x.a,{item:!0,xs:12},r.a.createElement(v.a,{error:!this.state.validPwdConf,variant:"outlined",required:!0,fullWidth:!0,name:"conf-password",label:"Confirm Password",type:"password",id:"conf-password",autoComplete:"off",onChange:this.pwdConfChange})),r.a.createElement(x.a,{item:!0,xs:12},r.a.createElement(P.a,{error:!0},this.state.errorText),r.a.createElement("br",null)))),!this.state.edit&&r.a.createElement("div",null,r.a.createElement(k.a,{component:"h2",variant:"h4",align:"center",color:"textPrimary"},this.state.fname," ",this.state.lname),r.a.createElement("br",null),r.a.createElement(k.a,{component:"h4",variant:"h5",align:"center",color:"textSecondary"},this.state.username),r.a.createElement(k.a,{component:"h4",variant:"h5",align:"center",color:"textSecondary"},this.state.email)),r.a.createElement("div",{className:this.props.classes.heroButtons},r.a.createElement(x.a,{container:!0,spacing:2,justify:"center"},r.a.createElement(x.a,{item:!0},this.state.edit&&r.a.createElement(E.a,{variant:"contained",color:"primary",onClick:this.submit},"Save Changes"),!this.state.edit&&r.a.createElement(E.a,{variant:"contained",color:"primary",onClick:function(){e.setState({edit:!0})}},"Edit Profile")),r.a.createElement(x.a,{item:!0},r.a.createElement(E.a,{variant:"outlined",color:"primary",onClick:this.handleLogout},"Logout")))))}}]),t}(r.a.Component);function Zt(e){var t=Xt();return r.a.createElement("div",{className:t.root},r.a.createElement(f.a,null),r.a.createElement("main",null,r.a.createElement("div",{className:t.heroContent},r.a.createElement(N.a,{maxWidth:"sm"},r.a.createElement(k.a,{component:"h1",variant:"h2",align:"center",color:"textPrimary",gutterBottom:!0,style:{marginBottom:"50px"}},"User Profile"),r.a.createElement(Qt,{classes:t,setAuth:e.setAuth,history:e.history})))))}var ea=a(384),ta=a.n(ea),aa=(a(912),Object(C.a)((function(e){return{root:{display:"flex"},appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto"}}})));function na(e){var t=aa();return r.a.createElement("div",{className:t.root},r.a.createElement(f.a,null),r.a.createElement("main",{className:t.content},r.a.createElement("div",{className:t.appBarSpacer}),r.a.createElement(ta.a,{url:"/api-doc.json",docExpansion:"none"})))}var ra=Object(s.h)((function(){var e=r.a.useState(!1),t=Object(i.a)(e,2),a=t[0],l=t[1],o=r.a.useState(),m=Object(i.a)(o,2),u=m[0],d=m[1],p=r.a.useState("Room Slot Booking"),g=Object(i.a)(p,2),h=g[0],E=g[1],f=Object(s.f)(),v=Object(s.g)();return Object(n.useEffect)((function(){c.reactLocalStorage.get("token")?l(!0):l(!1),d(c.reactLocalStorage.get("role")),"/book"===v.pathname&&null===c.reactLocalStorage.get("token")&&f.replace("/"),"/rooms"===v.pathname&&null===c.reactLocalStorage.get("token")&&(console.log(c.reactLocalStorage.get("token")),f.replace("/")),"/admin"===v.pathname&&window.location.replace("/admin/"),"/api"===v.pathname?E("API Documentation"):E("customer"===u?"Customer Dashboard":"roomManager"===u?"Room Manager Dashboard":"Room Slot Booking")}),[a,v.pathname,u]),r.a.createElement("div",null,r.a.createElement(be,{title:h,auth:a,role:u,setAuth:l,history:f}),r.a.createElement(s.c,null,r.a.createElement(s.a,{path:"/signup"},r.a.createElement(I,{history:f})),r.a.createElement(s.a,{path:"/profile"},a&&r.a.createElement(Zt,{history:f,setAuth:l}),!a&&"/profile"===v.pathname&&f.replace("/")),r.a.createElement(s.a,{path:"/login"},r.a.createElement(z,{auth:a,setAuth:l,setRole:d,history:f})),r.a.createElement(s.a,{path:"/book"},a&&r.a.createElement(xt,{auth:a,setAuth:l,setRole:d,history:f})),r.a.createElement(s.a,{path:"/rooms"},a&&r.a.createElement(Vt,{auth:a,setAuth:l,setRole:d,history:f})),r.a.createElement(s.a,{path:"/api"},r.a.createElement(na,null)),r.a.createElement(s.a,{path:"/"},"roomManager"===u&&r.a.createElement(tt,{history:f}),"customer"===u&&r.a.createElement(rt,{history:f}),!("roomManager"===u)&&!("customer"===u)&&r.a.createElement(Kt,{history:f}))))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var la=a(174);o.a.render(r.a.createElement(la.a,null,r.a.createElement(ra,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[400,1,2]]]);
//# sourceMappingURL=main.b6475751.chunk.js.map